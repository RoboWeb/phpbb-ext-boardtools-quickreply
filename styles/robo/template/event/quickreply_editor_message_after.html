<script type="text/javascript">
// <![CDATA[
	var form_name = 'qr_postform';
	var text_name = 'message';
	var load_draft = false;
	var upload = false;

	// Define the bbCode tags
	var bbcode = new Array();
	var bbtags = new Array('[b]','[/b]','[i]','[/i]','[u]','[/u]','[quote]','[/quote]','[code]','[/code]','[list]','[/list]','[list=]','[/list]','[img]','[/img]','[url]','[/url]','[flash=]', '[/flash]','[size=]','[/size]'<!-- BEGIN custom_tags -->, {custom_tags.BBCODE_NAME}<!-- END custom_tags -->);
	var imageTag = false;

	// Helpline messages
	var help_line = {
		b: '{LA_BBCODE_B_HELP}',
		i: '{LA_BBCODE_I_HELP}',
		u: '{LA_BBCODE_U_HELP}',
		q: '{LA_BBCODE_Q_HELP}',
		c: '{LA_BBCODE_C_HELP}',
		l: '{LA_BBCODE_L_HELP}',
		o: '{LA_BBCODE_O_HELP}',
		p: '{LA_BBCODE_P_HELP}',
		w: '{LA_BBCODE_W_HELP}',
		a: '{LA_BBCODE_A_HELP}',
		s: '{LA_BBCODE_S_HELP}',
		f: '{LA_BBCODE_F_HELP}',
		y: '{LA_BBCODE_Y_HELP}',
		d: '{LA_BBCODE_D_HELP}'
		<!-- BEGIN custom_tags -->
			,cb_{custom_tags.BBCODE_ID}: '{custom_tags.A_BBCODE_HELPLINE}'
		<!-- END custom_tags -->
	}

	function change_palette()
	{
		phpbb.toggleDisplay('colour_palette');
		e = document.getElementById('colour_palette');

		if (e.style.display == 'block')
		{
			document.getElementById('bbpalette').value = '{LA_FONT_COLOR_HIDE}';
		}
		else
		{
			document.getElementById('bbpalette').value = '{LA_FONT_COLOR}';
		}
	}

<!-- IF S_QR_CAPS_ENABLE -->
	function qr_formatToggle(s)
	{
		var t = '', sc = s.length, c;
		for (i = 0; i < sc; i++)
		{
			c = s.charAt(i);
			if (c.toLowerCase() == c) c = c.toUpperCase();
			else if (c.toUpperCase() == c) c = c.toLowerCase();
			t += c;
		}
		return t;
	}
    // param: reg = 0 - lowercase, reg = 1 - uppercase, reg = 2 - inverse
	function qr_updateCase(reg)
	{
		var buf = '', selection = null, start, end;
		var txtarea = document.forms[form_name].elements[text_name];

		if (document.selection) {
			selection = document.selection.createRange();
			buf = selection.text;
		}
		else if (typeof (txtarea.selectionStart) == "number") {
			start = txtarea.selectionStart;
			end = txtarea.selectionEnd;
			if (start != end)  buf = txtarea.value.substr(start, end - start);
			else buf = txtarea.value;
		}
		else {
			buf = txtarea.value;
		}

		switch (parseInt(reg)) {
			case 0: buf = buf.toLowerCase(); break;
			case 1: buf = buf.toUpperCase(); break;
			case 2: buf = qr_formatToggle(buf); break;
		}

		if (selection) {
			selection.text = buf;
		}
		else if (start != end) {
			txtarea.value = txtarea.value.substr(0, start) + buf + txtarea.value.substr(end);
		}
		else {
			txtarea.value = buf;
		}
		txtarea.focus();
	}
<!-- ENDIF -->
// ]]>
</script>
<!-- INCLUDEJS {T_ASSETS_PATH}/javascript/editor.js?assets_version={T_ASSETS_VERSION} -->

<!-- IF S_ABBC3_INSTALLED and S_BBCODE_BUTTONS -->
	<!-- INCLUDE @robo_abbc3/event/posting_editor_buttons_after.html -->
<!-- ENDIF -->
<!-- IF S_BBCODE_BUTTONS -->
<div id="colour_palette" style="display: none;">
	<dl style="clear: left;">
		<dt><label>{L_FONT_COLOR}{L_COLON}</label></dt>
		<dd id="color_palette_placeholder" class="color_palette_placeholder" data-orientation="h" data-height="12" data-width="15" data-bbcode="true"></dd>
	</dl>
</div>

{% spaceless %}
<div id="format-buttons" class="format-buttons">
	<!-- EVENT ext_quickreply_editor_buttons_before -->
	<button type="button" class="bbcode-b" accesskey="b" name="addbbcode0" onclick="bbstyle(0)" title="{L_BBCODE_B_HELP}" data-tooltip="{L_BBCODE_B_HELP}">
		<i class="fas fa-bold"></i>
	</button>
	<button type="button" class="bbcode-i" accesskey="i" name="addbbcode2" onclick="bbstyle(2)" title="{L_BBCODE_I_HELP}" data-tooltip="{L_BBCODE_I_HELP}">
		<i class="fas fa-italic"></i>
	</button>
	<button type="button" class="bbcode-u" accesskey="u" name="addbbcode4" onclick="bbstyle(4)" title="{L_BBCODE_U_HELP}" data-tooltip="{L_BBCODE_U_HELP}">
		<i class="fas fa-underline"></i>
	</button>

	<div class="spacer"></div>

	<button type="button" class="bbcode-color" name="bbpalette" id="bbpalette" onclick="change_palette();" title="{L_BBCODE_S_HELP}" data-tooltip="{L_BBCODE_S_HELP}">
		<i class="fas fa-font"></i>
	</button>
	<div class="bbcode-size">
		<button data-toggle="dropdown" title="{L_BBCODE_F_HELP}" data-tooltip="{L_BBCODE_F_HELP}" name="addbbcode20">
			<i class="fas fa-font"></i>
			<i class="fas fa-font"></i>
		</button>
		<ul class="dropdown-box">
			<li data-bbcode-size="50" onclick="bbfontstyle('[size=50]', '[/size]');this.form.addbbcode20.selectedIndex = 2;"><a href="javascript:void(0)">{L_FONT_TINY}</a></li>
			<li data-bbcode-size="85" onclick="bbfontstyle('[size=85]', '[/size]');this.form.addbbcode20.selectedIndex = 2;"><a href="javascript:void(0)">{L_FONT_SMALL}</a></li>
			<li data-bbcode-size="100" onclick="bbfontstyle('[size=100]', '[/size]');this.form.addbbcode20.selectedIndex = 2;"><a href="javascript:void(0)">{L_FONT_NORMAL}</a></li>
			<!-- IF not MAX_FONT_SIZE or MAX_FONT_SIZE >= 150 -->
				<li data-bbcode-size="150" onclick="bbfontstyle('[size=150]', '[/size]');this.form.addbbcode20.selectedIndex = 2;"><a href="javascript:void(0)">{L_FONT_LARGE}</a></li>
				<!-- IF not MAX_FONT_SIZE or MAX_FONT_SIZE >= 200 -->
					<li data-bbcode-size="200" onclick="bbfontstyle('[size=200]', '[/size]');this.form.addbbcode20.selectedIndex = 2;"><a href="javascript:void(0)">{L_FONT_HUGE}</a></li>
				<!-- ENDIF -->
			<!-- ENDIF -->
		</ul>
	</div>

	<div class="spacer"></div>

	<!-- IF S_BBCODE_QUOTE -->
		<button type="button" class="bbcode-quote" accesskey="q" name="addbbcode6" onclick="bbstyle(6)" title="{L_BBCODE_Q_HELP}" data-tooltip="{L_BBCODE_Q_HELP}">
			<i class="fas fa-quote-left"></i>
		</button>
	<!-- ENDIF -->
	<button type="button" class="bbcode-code" accesskey="c" name="addbbcode8" onclick="bbstyle(8)" title="{L_BBCODE_C_HELP}" data-tooltip="{L_BBCODE_C_HELP}">
		<i class="fas fa-code"></i>
	</button>
	<button type="button" class="bbcode-list" accesskey="l" name="addbbcode10" onclick="bbstyle(10)" title="{L_BBCODE_L_HELP}" data-tooltip="{L_BBCODE_L_HELP}">
		<i class="fas fa-list"></i>
	</button>
	<button type="button" class="bbcode-list-" accesskey="o" name="addbbcode12" onclick="bbstyle(12)" title="{L_BBCODE_O_HELP}" data-tooltip="{L_BBCODE_O_HELP}">
		<i class="fas fa-list-ol"></i>
	</button>
	<button type="button" class="bbcode-asterisk" accesskey="y" name="addlistitem" onclick="bbstyle(-1)" title="{L_BBCODE_LISTITEM_HELP}" data-tooltip="{L_BBCODE_LISTITEM_HELP}">
		<i class="fas fa-asterisk"></i>
	</button>

	<div class="spacer"></div>

	<!-- IF S_BBCODE_IMG -->
		<button type="button" class="bbcode-img" accesskey="p" name="addbbcode14" onclick="bbstyle(14)" title="{L_BBCODE_P_HELP}" data-tooltip="{L_BBCODE_P_HELP}">
			<i class="far fa-image"></i>
		</button>
	<!-- ENDIF -->
	<!-- IF S_LINKS_ALLOWED -->
		<button type="button" class="bbcode-url" accesskey="w" name="addbbcode16" onclick="bbstyle(16)" title="{L_BBCODE_W_HELP}" data-tooltip="{L_BBCODE_W_HELP}">
			<i class="fas fa-link"></i>
		</button>
	<!-- ENDIF -->
	<!-- IF S_BBCODE_FLASH -->
		<button type="button" class="bbcode-flash" accesskey="d" name="addbbcode18" onclick="bbstyle(18)" title="{L_BBCODE_D_HELP}" data-tooltip="{L_BBCODE_D_HELP}">
			<i class="fas fa-bolt"></i>
		</button>
	<!-- ENDIF -->
	<!-- EVENT ext_quickreply_editor_buttons_custom_tags_before -->
	<!-- BEGIN custom_tags -->
		<button type="button" class="bbcode-{custom_tags.BBCODE_TAG_CLEAN}" name="addbbcode{custom_tags.BBCODE_ID}" onclick="bbstyle({custom_tags.BBCODE_ID})" title="{{ custom_tags.BBCODE_HELPLINE }}" data-tooltip="{custom_tags.BBCODE_HELPLINE}">
			{custom_tags.BBCODE_TAG}
		</button>
	<!-- END custom_tags -->
	<!-- EVENT ext_quickreply_editor_buttons_after -->

	<!-- EVENT ext_quickreply_smiley_box_prepend -->
	<!-- IF S_SMILIES_ALLOWED and .smiley -->
		<div class="smilies-button">
			<span aria-expanded="true" data-toggle="dropdown"><i class="far fa-smile"></i></span>
			<div class="smilies-box"><!-- BEGIN smiley --><a href="#" onclick="insert_text('{smiley.A_SMILEY_CODE}', true); return false;"><img src="{smiley.SMILEY_IMG}" width="{smiley.SMILEY_WIDTH}" height="{smiley.SMILEY_HEIGHT}" alt="{smiley.SMILEY_CODE}" title="{smiley.SMILEY_DESC}" /></a><!-- END smiley --><!-- IF S_SHOW_SMILEY_LINK --><a href="{U_MORE_SMILIES}" onclick="popup(this.href, 750, 350, '_phpbbsmilies'); return false;" class="smilies-more">{L_MORE_SMILIES}</a><!-- ENDIF --></div>
		</div>
	<!-- ENDIF -->
	<!-- EVENT ext_quickreply_smiley_box_append -->

	<!-- IF S_QR_CAPS_ENABLE or S_QR_SHOW_BUTTON_TRANSLIT-->
		<div id="register-and-translit">
			<!-- IF S_QR_CAPS_ENABLE -->
				<input type="button" accesskey="t" name="uppercase" value="{L_QR_TRANSFORM_TEXT_UPPER}" onclick="qr_updateCase(1)" title="{L_QR_TRANSFORM_TEXT_UPPER_TOOLTIP}" />
				<input type="button" accesskey="t" name="lowercase" value="{L_QR_TRANSFORM_TEXT_LOWER}" onclick="qr_updateCase(0)" title="{L_QR_TRANSFORM_TEXT_LOWER_TOOLTIP}" />
				<input type="button" accesskey="t" name="inverscase" value="{L_QR_TRANSFORM_TEXT_INVERS}" onclick="qr_updateCase(2)" title="{L_QR_TRANSFORM_TEXT_INVERS_TOOLTIP}" />
			<!-- ENDIF -->
			<!-- IF S_QR_SHOW_BUTTON_TRANSLIT -->
				<div class="right">
					<abbr title="{L_QR_TRANSLIT_TEXT_TOOLTIP}" style="vertical-align: middle;">{L_QR_TRANSLIT_TEXT}{L_COLON}</abbr>&nbsp;
					<input type="button" accesskey="t" name="uppercase" value="{L_QR_TRANSLIT_TEXT_TO_RU}" onclick="translit()" title="{L_QR_TRANSLIT_TEXT_TOOLTIP}" />
				</div>
			<!-- ENDIF -->
		</div>
	<!-- ENDIF -->
	<!-- EVENT ext_quickreply_transform_text_buttons_after -->
</div>
{% endspaceless %}
<!-- ENDIF -->
<!-- INCLUDE @boardtools_quickreply/quickreply_form_buttons.html -->
